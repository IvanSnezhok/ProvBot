<!-- 3956a488-4d55-4566-917c-7cdbb5d41762 e7837031-b988-4a1d-a07e-1740127879d3 -->
# –°—Ö–µ–º–∞ —Ö–µ–Ω–¥–ª–µ—Ä—ñ–≤ ProvBot –Ω–∞ –æ—Å–Ω–æ–≤—ñ master –≥—ñ–ª–∫–∏ (Python ‚Üí Go)

## –ê–Ω–∞–ª—ñ–∑ –ø–æ—Ç–æ—á–Ω–æ—ó Python —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∑ master –≥—ñ–ª–∫–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤:

- `handlers/users/start.py` - —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è, –≤–∏–±—ñ—Ä –º–æ–≤–∏, –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–µ–ª–µ—Ñ–æ–Ω—É
- `handlers/users/panel.py` - –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å (–∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ users, –∞–ª–µ –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤)
- `handlers/users/support_chat.py` - —á–∞—Ç –∑ —Ç–µ—Ö–ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é
- `handlers/users/pay_bill.py` - –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è —Ä–∞—Ö—É–Ω–∫—É —á–µ—Ä–µ–∑ Telegram Payments
- `handlers/users/shop.py` - –º–∞–≥–∞–∑–∏–Ω —Ç–æ–≤–∞—Ä—ñ–≤
- `handlers/users/notify_balance.py` - —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –±–∞–ª–∞–Ω—Å (scheduler)
- `handlers/users/time_pay.py` - —Ç–∏–º—á–∞—Å–æ–≤–∏–π –ø–ª–∞—Ç—ñ–∂
- `handlers/users/contact.py` - –∫–æ–Ω—Ç–∞–∫—Ç/–∑–≤'—è–∑–æ–∫ –∑ –∫–ª—ñ—î–Ω—Ç–∞–º–∏
- `handlers/users/lang_change.py` - –∑–º—ñ–Ω–∞ –º–æ–≤–∏
- `handlers/groups/group_panel.py` - –ø–∞–Ω–µ–ª—å –¥–ª—è –≥—Ä—É–ø
- `handlers/errors/error_handler.py` - –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

## –î–µ—Ç–∞–ª—å–Ω–∞ —Å—Ö–µ–º–∞ —Ö–µ–Ω–¥–ª–µ—Ä—ñ–≤ –¥–ª—è Go –≤–µ—Ä—Å—ñ—ó

### 1. –ö–û–†–ò–°–¢–£–í–ê–¶–¨–ö–Ü –•–ï–ù–î–õ–ï–†–ò (`internal/handlers/user/`)

#### 1.1. –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —Ç–∞ —Å—Ç–∞—Ä—Ç (`start.go`) ‚úÖ

**–ö–æ–º–∞–Ω–¥–∏:**

- `/start` - –ø–æ—á–∞—Ç–∫–æ–≤–µ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è, —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ‚úÖ
  - –ü–æ–∫–∞–∑—É—î –≤–∏–±—ñ—Ä –º–æ–≤–∏ (UA/EN/RU) ‚úÖ
  - –ü—ñ—Å–ª—è –≤–∏–±–æ—Ä—É –º–æ–≤–∏ –ø—Ä–æ—Å–∏—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É ‚úÖ
  - –ü–µ—Ä–µ–≤—ñ—Ä—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ –±—ñ–ª—ñ–Ω–≥—É –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω—É ‚úÖ
  - –ó–±–µ—Ä—ñ–≥–∞—î –Ω–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä—É —è–∫—â–æ –∑–Ω–∞–π–¥–µ–Ω–æ ‚úÖ

**Callback queries:**

- `start_lang_ua` - –≤–∏–±—ñ—Ä —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ–≤–∏ ‚úÖ
- `start_lang_en` - –≤–∏–±—ñ—Ä –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó –º–æ–≤–∏ ‚úÖ
- `start_lang_ru` - –≤–∏–±—ñ—Ä —Ä–æ—Å—ñ–π—Å—å–∫–æ—ó –º–æ–≤–∏ ‚úÖ

**–°—Ç–∞–Ω–∏:**

- `WAITING_PHONE` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É (—á–µ—Ä–µ–∑ contact button) ‚úÖ

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ø—Ä–∏ `/start` ‚úÖ
- –ü–æ—à—É–∫ –≤ –±—ñ–ª—ñ–Ω–≥—É –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω—É ‚úÖ
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∞–¥–º—ñ–Ω–∞–º –ø—Ä–æ –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ‚úÖ
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–æ–º–µ—Ä–∞ –¥–æ–≥–æ–≤–æ—Ä—É ‚úÖ

#### 1.2. –ì–æ–ª–æ–≤–Ω–∞ –ø–∞–Ω–µ–ª—å (`panel.go`) ‚ö†Ô∏è

**–ö–Ω–æ–ø–∫–∏ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ (ReplyKeyboard):**

- "–ü–æ–ø–æ–≤–Ω–∏—Ç–∏ —Ä–∞—Ö—É–Ω–æ–∫" - –ø–µ—Ä–µ—Ö—ñ–¥ –¥–æ –æ–ø–ª–∞—Ç–∏ ‚úÖ
- "üõí –ú–∞–≥–∞–∑–∏–Ω" - –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–∞–≥–∞–∑–∏–Ω—É ‚ùå (–Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞ –ø–ª–∞–Ω–æ–º)
- "–ß–∞—Ç –∑ —Ç–µ—Ö. –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é" - –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —á–∞—Ç—É –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ ‚úÖ
- "–¢–∏–º—á–∞—Å–æ–≤–∏–π –ø–ª–∞—Ç—ñ–∂" - –∞–∫—Ç–∏–≤–∞—Ü—ñ—è —Ç–∏–º—á–∞—Å–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂—É ‚úÖ
- "–ù–∞–∑–∞–¥" - –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é ‚úÖ

**–ö–æ–º–∞–Ω–¥–∏:**

- `/help` - –¥–æ–≤—ñ–¥–∫–∞ –ø—Ä–æ –±–æ—Ç–∞ ‚úÖ

#### 1.3. –ü–æ–ø–æ–≤–Ω–µ–Ω–Ω—è —Ä–∞—Ö—É–Ω–∫—É (`pay_bill.go`) ‚úÖ

**–¢–µ–∫—Å—Ç–æ–≤–∞ –∫–Ω–æ–ø–∫–∞:** "–ü–æ–ø–æ–≤–Ω–∏—Ç–∏ —Ä–∞—Ö—É–Ω–æ–∫" ‚úÖ

**–õ–æ–≥—ñ–∫–∞:**

- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∞—Ä–∏—Ñ—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ –±—ñ–ª—ñ–Ω–≥—É ‚úÖ
- –î–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö —Ç–∞—Ä–∏—Ñ—ñ–≤ –ø–æ–∫–∞–∑—É—î –≥–æ—Ç–æ–≤—ñ —ñ–Ω–≤–æ–π—Å–∏: ‚úÖ
  - –°–¢–ê–ù–î–ê–†–¢(180–≥—Ä–Ω): 180 –≥—Ä–Ω –∞–±–æ 1080 –≥—Ä–Ω (6 –º—ñ—Å—è—Ü—ñ–≤ –∑ 10% –±–æ–Ω—É—Å–æ–º) ‚úÖ
  - PON-100(200–≥—Ä–Ω): 200 –≥—Ä–Ω –∞–±–æ 1200 –≥—Ä–Ω (6 –º—ñ—Å—è—Ü—ñ–≤) ‚úÖ
  - PON-300(350–≥—Ä–Ω): 350 –≥—Ä–Ω –∞–±–æ 2100 –≥—Ä–Ω (6 –º—ñ—Å—è—Ü—ñ–≤) ‚úÖ
- –î–ª—è —ñ–Ω—à–∏—Ö —Ç–∞—Ä–∏—Ñ—ñ–≤: –∑–∞–ø–∏—Ç —Å—É–º–∏ –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –≤—Ä—É—á–Ω—É ‚úÖ

**–°—Ç–∞–Ω–∏:**

- `WAITING_INVOICE_PAYLOAD` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è —Å—É–º–∏ –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è ‚úÖ
- `WAITING_INVOICE_CONTRACT` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –Ω–æ–º–µ—Ä–∞ –¥–æ–≥–æ–≤–æ—Ä—É ‚úÖ
- `INVALID_PAYLOAD` - –Ω–µ–≤–∞–ª—ñ–¥–Ω–∞ —Å—É–º–∞ (–º–µ–Ω—à–µ –º—ñ–Ω—ñ–º—É–º—É) ‚úÖ

**Callback queries:**

- –û–±—Ä–æ–±–∫–∞ pre-checkout —Ç–∞ successful payment —á–µ—Ä–µ–∑ Telegram Payments API ‚úÖ

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**

- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω–≤–æ–π—Å—ñ–≤ —á–µ—Ä–µ–∑ Telegram Payments ‚úÖ
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–æ–º–µ—Ä–∞ –¥–æ–≥–æ–≤–æ—Ä—É (8 —Ü–∏—Ñ—Ä) ‚úÖ
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è –¥–æ–≥–æ–≤–æ—Ä—É –≤ –±—ñ–ª—ñ–Ω–≥—É ‚úÖ
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∞–¥–º—ñ–Ω–∞–º –ø—Ä–æ —Å—Ç–≤–æ—Ä–µ–Ω—ñ —ñ–Ω–≤–æ–π—Å–∏ ‚úÖ
- –û–±—Ä–æ–±–∫–∞ —É—Å–ø—ñ—à–Ω–∏—Ö –ø–ª–∞—Ç–µ–∂—ñ–≤ ‚úÖ

#### 1.4. –¢–∏–º—á–∞—Å–æ–≤–∏–π –ø–ª–∞—Ç—ñ–∂ (`time_pay.go`) ‚úÖ

**–¢–µ–∫—Å—Ç–æ–≤–∞ –∫–Ω–æ–ø–∫–∞:** "–¢–∏–º—á–∞—Å–æ–≤–∏–π –ø–ª–∞—Ç—ñ–∂" ‚úÖ

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**

- –†–æ–∑–±–ª–æ–∫–æ–≤–∫–∞ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É –Ω–∞ 24 –≥–æ–¥–∏–Ω–∏ ‚úÖ
- –ü–æ–ø–æ–≤–Ω–µ–Ω–Ω—è —Ä–∞—Ö—É–Ω–∫—É –Ω–∞ –º—ñ–Ω—ñ–º–∞–ª—å–Ω—É —Å—É–º—É ‚úÖ
- –û–±–º–µ–∂–µ–Ω–Ω—è: —Ä–∞–∑ –Ω–∞ –º—ñ—Å—è—Ü—å ‚úÖ
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∞–¥–º—ñ–Ω–∞–º –ø—Ä–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è ‚úÖ

#### 1.5. –ú–∞–≥–∞–∑–∏–Ω (`shop.go`) ‚ùå

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ó–∞ –ø–ª–∞–Ω–æ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –º–∞–≥–∞–∑–∏–Ω –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω —É –Ω–æ–≤–æ–º—É –±–æ—Ç—ñ.

#### 1.6. –ß–∞—Ç –∑ —Ç–µ—Ö–ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é (`support_chat.go`) ‚úÖ

**–¢–µ–∫—Å—Ç–æ–≤–∞ –∫–Ω–æ–ø–∫–∞:** "–ß–∞—Ç –∑ —Ç–µ—Ö. –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é" ‚úÖ

**–°—Ç–∞–Ω–∏:**

- `WAITING_FOR_SUPPORT` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ ‚úÖ
- `CHATTING` - –∞–∫—Ç–∏–≤–Ω–∏–π —á–∞—Ç –∑ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º ‚úÖ

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**

- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–ø–∏—Ç—É—î —á–∞—Ç –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ ‚úÖ
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∞–¥–º—ñ–Ω–∞–º –ø—Ä–æ –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç ‚úÖ
- –ê–¥–º—ñ–Ω –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `/connect <user_id>` ‚úÖ
- –î–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—ñ–π –æ–±–º—ñ–Ω –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏ ‚úÖ
- –ê–¥–º—ñ–Ω –∑–∞–≤–µ—Ä—à—É—î —á–∞—Ç —á–µ—Ä–µ–∑ `/end_chat` ‚úÖ
- –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–∏—Ö —á–∞—Ç—ñ–≤ –≤ –ø–∞–º'—è—Ç—ñ (active_chats map) ‚úÖ

**–ê–¥–º—ñ–Ω—Å—å–∫—ñ –∫–æ–º–∞–Ω–¥–∏:**

- `/connect <user_id>` - –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ —á–∞—Ç—É –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º ‚úÖ
- `/end_chat` - –∑–∞–≤–µ—Ä—à–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —á–∞—Ç ‚úÖ

#### 1.7. –ó–º—ñ–Ω–∞ –º–æ–≤–∏ (`lang_change.go`) ‚úÖ

**Callback queries:**

- `lang_ua` - –∑–º—ñ–Ω–∞ –Ω–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫—É ‚úÖ
- `lang_en` - –∑–º—ñ–Ω–∞ –Ω–∞ –∞–Ω–≥–ª—ñ–π—Å—å–∫—É ‚úÖ
- `lang_ru` - –∑–º—ñ–Ω–∞ –Ω–∞ —Ä–æ—Å—ñ–π—Å—å–∫—É ‚úÖ

### 2. –ê–î–ú–Ü–ù–°–¨–ö–Ü –•–ï–ù–î–õ–ï–†–ò (`internal/handlers/admin/`)

#### 2.1. –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å (`panel.go`) ‚úÖ

**–ö–æ–º–∞–Ω–¥–∏:**

- `/admin` –∞–±–æ —Ç–µ–∫—Å—Ç "–ù–∞–∑–∞–¥" (–¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤) - –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ ‚úÖ
- `/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ ‚úÖ

**–¢–µ–∫—Å—Ç –≤—Ö—ñ–¥–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å:**

- –Ø–∫—â–æ —Ç–µ–∫—Å—Ç —î –Ω–æ–º–µ—Ä–æ–º –¥–æ–≥–æ–≤–æ—Ä—É ‚Üí –ø–æ—à—É–∫ —Ç–∞ –ø–æ–∫–∞–∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ‚úÖ
- –Ü–Ω–∞–∫—à–µ ‚Üí –ø–æ–∫–∞–∑ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ ‚úÖ

**–ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∞ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ:**

- –ö–Ω–æ–ø–∫–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è ‚úÖ

#### 2.2. –ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (`users.go`) ‚úÖ

**Callback queries:**

- `account_menu` - –º–µ–Ω—é –ø–æ—à—É–∫—É –∞–±–æ–Ω–µ–Ω—Ç–∞ ‚úÖ
- `search_contract` - –ø–æ—à—É–∫ –ø–æ –Ω–æ–º–µ—Ä—É –¥–æ–≥–æ–≤–æ—Ä—É ‚úÖ
- `search_phone` - –ø–æ—à—É–∫ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω—É ‚úÖ
- `search_name` - –ø–æ—à—É–∫ –ø–æ —ñ–º–µ–Ω—ñ/–ø—Ä—ñ–∑–≤–∏—â—É ‚úÖ
- `search_address` - –ø–æ—à—É–∫ –ø–æ –∞–¥—Ä–µ—Å—ñ ‚úÖ

**–°—Ç–∞–Ω–∏:**

- `SEARCH_CONTRACT` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –Ω–æ–º–µ—Ä–∞ –¥–æ–≥–æ–≤–æ—Ä—É ‚úÖ
- `SEARCH_PHONE` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É ‚úÖ
- `SEARCH_NAME` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è —ñ–º–µ–Ω—ñ ‚úÖ
- `SEARCH_ADDRESS` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –∞–¥—Ä–µ—Å–∏ ‚úÖ
- `ACCOUNT_MENU_LIST` - —Å–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ ‚úÖ

**Callback queries –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤:**

- `account_<contract>` - –≤–∏–±—ñ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑—ñ —Å–ø–∏—Å–∫—É ‚úÖ

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**

- –ü–æ—à—É–∫ –≤ –±—ñ–ª—ñ–Ω–≥—É –ø–æ —Ä—ñ–∑–Ω–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º ‚úÖ
- –ü–æ–∫–∞–∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (—Ñ–æ—Ä–º–∞—Ç–æ–≤–∞–Ω–∏–π —Ç–µ–∫—Å—Ç) ‚úÖ
- –ú–µ–Ω—é –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º ‚úÖ

#### 2.3. –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±–∞–ª–∞–Ω—Å–æ–º (`billing.go`) ‚úÖ

**Callback queries:**

- `admin_change_balance_<user_id>` - –∑–º—ñ–Ω–∞ –±–∞–ª–∞–Ω—Å—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ‚úÖ

**–°—Ç–∞–Ω–∏:**

- `ADMIN_CHANGE_BALANCE` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è —Å—É–º–∏ –¥–ª—è –∑–º—ñ–Ω–∏ –±–∞–ª–∞–Ω—Å—É ‚úÖ

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**

- –ü–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –±–∞–ª–∞–Ω—Å—É: x + –≤–≤–µ–¥–µ–Ω–∞ —Å—É–º–∞ (–¥–µ x - –ø–æ—Ç–æ—á–Ω–∏–π –±–∞–ª–∞–Ω—Å) ‚úÖ
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—Ö/–ø–æ–º–∏–ª–∫—É –æ–ø–µ—Ä–∞—Ü—ñ—ó ‚úÖ

#### 2.4. –¢–∏–º—á–∞—Å–æ–≤–∏–π –ø–ª–∞—Ç—ñ–∂ –¥–ª—è –∞–¥–º—ñ–Ω–∞ (`billing.go`) ‚úÖ

**Callback queries:**

- `admin_temporary_payment_<user_id>` - —É–≤—ñ–º–∫–Ω—É—Ç–∏ —Ç–∏–º—á–∞—Å–æ–≤–∏–π –ø–ª–∞—Ç—ñ–∂ –¥–ª—è –∞–±–æ–Ω–µ–Ω—Ç–∞ ‚úÖ

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**

- –ê–∫—Ç–∏–≤–∞—Ü—ñ—è —Ç–∏–º—á–∞—Å–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂—É —á–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å ‚úÖ
- –†–æ–±–æ—Ç–∞ –∑ –ø–æ—Ç–æ—á–Ω–∏–º –≤–∏–±—Ä–∞–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º –∞–±–æ –∑—ñ —Å–ø–∏—Å–∫—É ‚úÖ

#### 2.5. –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (`broadcast.go`) ‚úÖ

**Callback queries:**

- `panel_send_message` - —Ä–æ–∑–ø–æ—á–∞—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–∫—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ‚úÖ
- `answer_<user_id>` - –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É ‚úÖ

**–°—Ç–∞–Ω–∏:**

- `SEND_MESSAGE_PHONE` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É –∞–±–æ ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ‚úÖ
- `SEND_MESSAGE_TEXT` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É/–º–µ–¥—ñ–∞ –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ ‚úÖ
- `ANSWER` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É ‚úÖ

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**

- –í—ñ–¥–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç—É, —Ñ–æ—Ç–æ, –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤, –≤—ñ–¥–µ–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º ‚úÖ
- –í—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ ‚úÖ
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—Å—ñ–º –∞–¥–º—ñ–Ω–∞–º –ø—Ä–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ‚úÖ

#### 2.6. –Ü—Å—Ç–æ—Ä—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (`logs.go`) ‚úÖ

**Callback queries:**

- `message_history` - –ø–µ—Ä–µ–≥–ª—è–¥ —ñ—Å—Ç–æ—Ä—ñ—ó –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å ‚úÖ

**–°—Ç–∞–Ω–∏:**

- `MESSAGE_HISTORY` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É ‚úÖ

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**

- –ü–æ–∫–∞–∑ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö N –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ ‚úÖ
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å: 10 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å ‚úÖ

#### 2.7. –ú–µ–Ω—é –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É (`account.go`) ‚úÖ

**Callback queries (–ø—ñ—Å–ª—è –≤–∏–±–æ—Ä—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞):**

- `admin_account_menu` - –º–µ–Ω—é –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º ‚úÖ
- `back` - –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ ‚úÖ

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**

- –ü–æ–∫–∞–∑ –¥–µ—Ç–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ‚úÖ
- –û–ø—Ü—ñ—ó –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –±–∞–ª–∞–Ω—Å—É, —Å—Ç–∞—Ç—É—Å—É, –ø–æ—Å–ª—É–≥ ‚úÖ

### 3. –î–û–î–ê–¢–ö–û–í–Ü –§–£–ù–ö–¶–Ü–á

#### 3.1. –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –±–∞–ª–∞–Ω—Å (`notify_balance.go`) ‚úÖ

**Scheduler –∑–∞–¥–∞—á–∞:**

- –ó–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è 9 —á–∏—Å–ª–∞ –∫–æ–∂–Ω–æ–≥–æ –º—ñ—Å—è—Ü—è –æ 23:45 ‚úÖ
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î –±–∞–ª–∞–Ω—Å –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏ ‚úÖ
- –í—ñ–¥–ø—Ä–∞–≤–ª—è—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –º–æ–∂–ª–∏–≤–µ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è 12 —á–∏—Å–ª–∞ ‚úÖ
- –†–µ–∫–æ–º–µ–Ω–¥—É—î –ø–æ–ø–æ–≤–Ω–∏—Ç–∏ –±–∞–ª–∞–Ω—Å ‚úÖ

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:**

- Worker pool –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ ‚úÖ
- –ù–∞–ª–∞—à—Ç–æ–≤—É–≤–∞–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–æ—Ä–∫–µ—Ä—ñ–≤ —á–µ—Ä–µ–∑ SCHEDULER_WORKERS (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 10) ‚úÖ
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–∏ –∑ —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –¥–ª—è API –≤–∏–∫–ª–∏–∫—ñ–≤ (Google/SMS) ‚úÖ
- –ó–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ –∑–∞–ø–∏—Ç–∞–º–∏ –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è rate limiting ‚úÖ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É ‚úÖ

#### 3.2. –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ (`errors.go`) ‚ö†Ô∏è

- –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ ‚ö†Ô∏è (–±–∞–∑–æ–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤ handler.go)
- –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –ø–æ–º–∏–ª–æ–∫ ‚úÖ
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏ ‚úÖ

#### 3.3. –ï—Ö–æ —Ö–µ–Ω–¥–ª–µ—Ä (`echo.go`) ‚ö†Ô∏è

- –û–±—Ä–æ–±–∫–∞ –Ω–µ–≤—ñ–¥–æ–º–∏—Ö –∫–æ–º–∞–Ω–¥ —Ç–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å ‚ö†Ô∏è (—á–∞—Å—Ç–∫–æ–≤–æ —á–µ—Ä–µ–∑ handleTextMessage)

### 4. CALLBACK QUERIES - –ü–æ–≤–Ω–∏–π —Å–ø–∏—Å–æ–∫

#### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ:

- `start_lang_ua`, `start_lang_en`, `start_lang_ru` - –≤–∏–±—ñ—Ä –º–æ–≤–∏ ‚úÖ
- `lang_ua`, `lang_en`, `lang_ru` - –∑–º—ñ–Ω–∞ –º–æ–≤–∏ ‚úÖ
- `cat_<index>` - –≤–∏–±—ñ—Ä –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –≤ –º–∞–≥–∞–∑–∏–Ω—ñ ‚ùå (–º–∞–≥–∞–∑–∏–Ω –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω)
- `prev_<category_index>` - –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Ç–æ–≤–∞—Ä ‚ùå (–º–∞–≥–∞–∑–∏–Ω –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω)
- `next_<category_index>` - –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ç–æ–≤–∞—Ä ‚ùå (–º–∞–≥–∞–∑–∏–Ω –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω)

#### –ê–¥–º—ñ–Ω—Å—å–∫—ñ:

- `back` - –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –Ω–∞–∑–∞–¥ ‚úÖ
- `account_menu` - –º–µ–Ω—é –ø–æ—à—É–∫—É ‚úÖ
- `search_contract`, `search_phone`, `search_name`, `search_address` - –º–µ—Ç–æ–¥–∏ –ø–æ—à—É–∫—É ‚úÖ
- `account_<contract>` - –≤–∏–±—ñ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ‚úÖ
- `admin_change_balance_<user_id>` - –∑–º—ñ–Ω–∞ –±–∞–ª–∞–Ω—Å—É ‚úÖ
- `admin_temporary_payment_<user_id>` - —Ç–∏–º—á–∞—Å–æ–≤–∏–π –ø–ª–∞—Ç—ñ–∂ ‚úÖ
- `panel_send_message` - –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ‚úÖ
- `answer_<user_id>` - –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É ‚úÖ
- `message_history` - —ñ—Å—Ç–æ—Ä—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å ‚úÖ
- `admin_account_menu` - –º–µ–Ω—é –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É ‚úÖ

### 5. –°–¢–ê–ù–ò (States) - –ü–æ–≤–Ω–∏–π —Å–ø–∏—Å–æ–∫

#### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ:

- `WAITING_PHONE` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É ‚úÖ
- `WAITING_INVOICE_PAYLOAD` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è —Å—É–º–∏ –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è ‚úÖ
- `WAITING_INVOICE_CONTRACT` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –Ω–æ–º–µ—Ä–∞ –¥–æ–≥–æ–≤–æ—Ä—É ‚úÖ
- `INVALID_PAYLOAD` - –Ω–µ–≤–∞–ª—ñ–¥–Ω–∞ —Å—É–º–∞ ‚úÖ
- `WAITING_FOR_SUPPORT` - –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ ‚úÖ
- `CHATTING` - –∞–∫—Ç–∏–≤–Ω–∏–π —á–∞—Ç ‚úÖ

#### –ê–¥–º—ñ–Ω—Å—å–∫—ñ:

- `SEARCH_CONTRACT` - –ø–æ—à—É–∫ –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É ‚úÖ
- `SEARCH_PHONE` - –ø–æ—à—É–∫ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É ‚úÖ
- `SEARCH_NAME` - –ø–æ—à—É–∫ –ø–æ —ñ–º–µ–Ω—ñ ‚úÖ
- `SEARCH_ADDRESS` - –ø–æ—à—É–∫ –ø–æ –∞–¥—Ä–µ—Å—ñ ‚úÖ
- `ACCOUNT_MENU_LIST` - —Å–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ ‚úÖ
- `ADMIN_CHANGE_BALANCE` - –∑–º—ñ–Ω–∞ –±–∞–ª–∞–Ω—Å—É ‚úÖ
- `SEND_MESSAGE_PHONE` - –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (–Ω–æ–º–µ—Ä) ‚úÖ
- `SEND_MESSAGE_TEXT` - –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (—Ç–µ–∫—Å—Ç/–º–µ–¥—ñ–∞) ‚úÖ
- `ANSWER` - –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É ‚úÖ
- `MESSAGE_HISTORY` - —ñ—Å—Ç–æ—Ä—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å ‚úÖ

### 6. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤ –¥–ª—è Go –≤–µ—Ä—Å—ñ—ó

```
internal/handlers/
‚îú‚îÄ‚îÄ user/
‚îÇ   ‚îú‚îÄ‚îÄ start.go          # /start, —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è, –≤–∏–±—ñ—Ä –º–æ–≤–∏ ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ panel.go          # –≥–æ–ª–æ–≤–Ω–∞ –ø–∞–Ω–µ–ª—å, /help ‚ö†Ô∏è (—á–∞—Å—Ç–∫–æ–≤–æ)
‚îÇ   ‚îú‚îÄ‚îÄ pay_bill.go       # –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è —Ä–∞—Ö—É–Ω–∫—É ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ time_pay.go       # —Ç–∏–º—á–∞—Å–æ–≤–∏–π –ø–ª–∞—Ç—ñ–∂ ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ shop.go           # –º–∞–≥–∞–∑–∏–Ω —Ç–æ–≤–∞—Ä—ñ–≤ ‚ùå (–Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω)
‚îÇ   ‚îú‚îÄ‚îÄ support_chat.go   # —á–∞—Ç –∑ —Ç–µ—Ö–ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é ‚úÖ (–≤ support/)
‚îÇ   ‚îú‚îÄ‚îÄ lang_change.go    # –∑–º—ñ–Ω–∞ –º–æ–≤–∏ ‚úÖ (—ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –≤ start.go)
‚îÇ   ‚îî‚îÄ‚îÄ callbacks.go      # –æ–±—Ä–æ–±–∫–∞ callback queries ‚ö†Ô∏è (—á–∞—Å—Ç–∫–æ–≤–æ)
‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îú‚îÄ‚îÄ panel.go          # –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å, /stats ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ users.go          # –ø–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ billing.go        # —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±–∞–ª–∞–Ω—Å–æ–º ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ broadcast.go      # –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ account.go        # –º–µ–Ω—é –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ logs.go           # —ñ—Å—Ç–æ—Ä—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ callbacks.go      # –æ–±—Ä–æ–±–∫–∞ callback queries ‚úÖ
‚îú‚îÄ‚îÄ support/
‚îÇ   ‚îî‚îÄ‚îÄ chat.go           # –ª–æ–≥—ñ–∫–∞ —á–∞—Ç—É –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ ‚úÖ
‚îî‚îÄ‚îÄ scheduler/
    ‚îî‚îÄ‚îÄ notify_balance.go # —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –±–∞–ª–∞–Ω—Å ‚úÖ
```

### 7. –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

#### Telegram Payments:

- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Telegram Payments API ‚úÖ
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω–≤–æ–π—Å—ñ–≤ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∞—Ä–∏—Ñ—ñ–≤ ‚úÖ
- –û–±—Ä–æ–±–∫–∞ pre-checkout —Ç–∞ successful payment webhooks ‚úÖ
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–ª–∞—Ç–µ–∂—ñ–≤ ‚úÖ

#### –ü–æ—à—É–∫ –≤ –±—ñ–ª—ñ–Ω–≥—É:

- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ MySQL –±—ñ–ª—ñ–Ω–≥–æ–≤–æ—é —Å–∏—Å—Ç–µ–º–æ—é ‚úÖ
- –ü–æ—à—É–∫ –ø–æ —Ä—ñ–∑–Ω–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º (–¥–æ–≥–æ–≤—ñ—Ä, —Ç–µ–ª–µ—Ñ–æ–Ω, —ñ–º'—è, –∞–¥—Ä–µ—Å–∞) ‚úÖ
- –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –≤–∏–≤–æ–¥—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ‚úÖ

#### –ß–∞—Ç –ø—ñ–¥—Ç—Ä–∏–º–∫–∏:

- –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–∏—Ö —á–∞—Ç—ñ–≤ (in-memory –∞–±–æ Redis) ‚úÖ (in-memory)
- –î–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è –º—ñ–∂ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º —Ç–∞ –∞–¥–º—ñ–Ω–æ–º ‚úÖ
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—Å—ñ–º –∞–¥–º—ñ–Ω–∞–º –ø—Ä–æ –Ω–æ–≤—ñ –∑–∞–ø–∏—Ç–∏ ‚úÖ

#### –ú–∞–≥–∞–∑–∏–Ω:

- –ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ–≤–∞—Ä—ñ–≤ (–∑ —Ñ–∞–π–ª—É –∞–±–æ API) ‚ùå (–Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω)
- –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è ‚ùå (–Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω)
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –ø–µ—Ä–µ–≥–ª—è–¥—É –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ‚ùå (–Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω)

### To-dos

- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ StateManager –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–∞–Ω–∞–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ ‚úÖ
- [x] –í–∏–Ω–µ—Å—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ —Ö–µ–Ω–¥–ª–µ—Ä–∏ –≤ –æ–∫—Ä–µ–º—ñ —Ñ–∞–π–ª–∏ (user/) ‚úÖ
  - [x] `start.go` - —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è, –≤–∏–±—ñ—Ä –º–æ–≤–∏, –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–µ–ª–µ—Ñ–æ–Ω—É ‚úÖ
  - [x] `pay_bill.go` - –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è —Ä–∞—Ö—É–Ω–∫—É —á–µ—Ä–µ–∑ Telegram Payments ‚úÖ
  - [x] `time_pay.go` - —Ç–∏–º—á–∞—Å–æ–≤–∏–π –ø–ª–∞—Ç—ñ–∂ ‚úÖ
  - [x] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –≥–æ–ª–æ–≤–Ω–∏–º BotHandler ‚úÖ
- [x] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –±–∞–∑–æ–≤—ñ callback queries –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ ‚úÖ
  - [x] `start_lang_ua`, `start_lang_en`, `start_lang_ru` - –≤–∏–±—ñ—Ä –º–æ–≤–∏ –ø—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó ‚úÖ
  - [x] –û–±—Ä–æ–±–∫–∞ pre-checkout —Ç–∞ successful payment ‚úÖ
  - [ ] Callback queries –¥–ª—è topup (—á–∞—Å—Ç–∫–æ–≤–æ - —á–µ—Ä–µ–∑ —Ç–µ–∫—Å—Ç–æ–≤—ñ –∫–Ω–æ–ø–∫–∏) ‚ö†Ô∏è
  - [ ] Callback queries –¥–ª—è service details ‚ùå
  - [ ] Callback queries –¥–ª—è outages ‚ùå
- [x] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∞–¥–º—ñ–Ω—Å—å–∫—ñ —Ö–µ–Ω–¥–ª–µ—Ä–∏ (admin, broadcast, outage, users, billing) ‚úÖ
  - [x] –ë–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞ –∫–æ–º–∞–Ω–¥–∏ (`/admin`, `/stats`, `/connect`, `/end_chat`) ‚úÖ
  - [x] `admin/panel.go` - –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å ‚úÖ
  - [x] `admin/users.go` - –ø–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ ‚úÖ
  - [x] `admin/billing.go` - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±–∞–ª–∞–Ω—Å–æ–º ‚úÖ
  - [x] `admin/broadcast.go` - –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å ‚úÖ
  - [x] `admin/account.go` - –º–µ–Ω—é –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É ‚úÖ
  - [x] `admin/logs.go` - —ñ—Å—Ç–æ—Ä—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å ‚úÖ
- [x] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ callback queries –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤ ‚úÖ
  - [x] `account_menu`, `search_contract`, `search_phone`, `search_name`, `search_address` ‚úÖ
  - [x] `admin_change_balance_<user_id>`, `admin_temporary_payment_<user_id>` ‚úÖ
  - [x] `panel_send_message`, `answer_<user_id>` ‚úÖ
  - [x] `message_history`, `admin_account_menu` ‚úÖ
- [x] –î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–∫–ª–∞–¥–∏ –¥–ª—è –Ω–æ–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–∞ –∫–Ω–æ–ø–æ–∫ ‚úÖ
  - [x] –ü–µ—Ä–µ–∫–ª–∞–¥–∏ –¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó —Ç–∞ –≤–∏–±–æ—Ä—É –º–æ–≤–∏ (UA/EN/RU) ‚úÖ
  - [x] –ü–µ—Ä–µ–∫–ª–∞–¥–∏ –¥–ª—è –æ–ø–ª–∞—Ç–∏ (topup, invoices) ‚úÖ
  - [x] –ü–µ—Ä–µ–∫–ª–∞–¥–∏ –¥–ª—è —Ç–∏–º—á–∞—Å–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂—É ‚úÖ
  - [x] –ü–µ—Ä–µ–∫–ª–∞–¥–∏ –¥–ª—è —á–∞—Ç—É –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ ‚úÖ
  - [x] –ü–µ—Ä–µ–∫–ª–∞–¥–∏ –¥–ª—è –∞–¥–º—ñ–Ω—Å—å–∫–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π (UA/EN) ‚úÖ
  - [ ] –ü–µ—Ä–µ–∫–ª–∞–¥–∏ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω—É (—è–∫—â–æ –±—É–¥–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ) ‚ùå

### –î–æ–¥–∞—Ç–∫–æ–≤—ñ –≤–∏–∫–æ–Ω–∞–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è:

- [x] –°—Ç–≤–æ—Ä–µ–Ω–æ `internal/handlers/context.go` –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è —Ü–∏–∫–ª—ñ—á–Ω–∏—Ö —ñ–º–ø–æ—Ä—Ç—ñ–≤ ‚úÖ
- [x] –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ `internal/handlers/support/chat.go` - —Å–∏—Å—Ç–µ–º–∞ —á–∞—Ç—É –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ ‚úÖ
- [x] –î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–∫—É –ø–ª–∞—Ç–µ–∂—ñ–≤ (pre-checkout, successful payment) ‚úÖ
- [x] –†–æ–∑—à–∏—Ä–µ–Ω–æ BillingRepository –º–µ—Ç–æ–¥–∞–º–∏ –ø–æ—à—É–∫—É (–ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É, –¥–æ–≥–æ–≤–æ—Ä—É, —ñ–º–µ–Ω—ñ, –∞–¥—Ä–µ—Å—ñ) ‚úÖ
- [x] –î–æ–¥–∞–Ω–æ –ø–æ–ª—è `phone_number` —Ç–∞ `contract` –¥–æ –º–æ–¥–µ–ª—ñ User ‚úÖ
- [x] –û–Ω–æ–≤–ª–µ–Ω–æ –º—ñ–≥—Ä–∞—Ü—ñ—ó –ë–î –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –Ω–æ–≤–∏—Ö –ø–æ–ª—ñ–≤ ‚úÖ
- [x] –î–æ–¥–∞–Ω–æ `ProviderToken` –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –¥–ª—è Telegram Payments ‚úÖ
- [x] –°—Ç–≤–æ—Ä–µ–Ω–æ StateManager –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –æ—á–∏—â–µ–Ω–Ω—è–º –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö —Å—Ç–∞–Ω—ñ–≤ ‚úÖ
- [x] –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –≤—Å—ñ —Ö–µ–Ω–¥–ª–µ—Ä–∏ –∑ –≥–æ–ª–æ–≤–Ω–∏–º BotHandler ‚úÖ
- [x] –ü—Ä–æ–µ–∫—Ç –∫–æ–º–ø—ñ–ª—é—î—Ç—å—Å—è –±–µ–∑ –ø–æ–º–∏–ª–æ–∫ ‚úÖ

### –°—Ç–∞—Ç—É—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:

**‚úÖ –ü–æ–≤–Ω—ñ—Å—Ç—é –≤–∏–∫–æ–Ω–∞–Ω–æ:**
- StateManager –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–∞–Ω–∞–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ —Ö–µ–Ω–¥–ª–µ—Ä–∏ (start, pay_bill, time_pay)
- –ß–∞—Ç –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∑ –∞–¥–º—ñ–Ω–∞–º–∏
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Telegram Payments
- –ë–∞–∑–æ–≤—ñ –ø–µ—Ä–µ–∫–ª–∞–¥–∏ (UA/EN/RU)
- –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –º–æ–¥–µ–ª–µ–π —Ç–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤
- **–ê–¥–º—ñ–Ω—Å—å–∫–∞ –ø–∞–Ω–µ–ª—å –∑ –ø–æ–≤–Ω–∏–º —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª–æ–º:**
  - –ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (–ø–æ –¥–æ–≥–æ–≤–æ—Ä—É, —Ç–µ–ª–µ—Ñ–æ–Ω—É, —ñ–º–µ–Ω—ñ, –∞–¥—Ä–µ—Å—ñ)
  - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±–∞–ª–∞–Ω—Å–æ–º (–∑–º—ñ–Ω–∞ –±–∞–ª–∞–Ω—Å—É, —Ç–∏–º—á–∞—Å–æ–≤–∏–π –ø–ª–∞—Ç—ñ–∂)
  - –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (—Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, –¥–æ–∫—É–º–µ–Ω—Ç–∏, –≤—ñ–¥–µ–æ)
  - –Ü—Å—Ç–æ—Ä—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
  - –ú–µ–Ω—é –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É
  - Callback queries –¥–ª—è –≤—Å—ñ—Ö –∞–¥–º—ñ–Ω—Å—å–∫–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
  - –ü–µ—Ä–µ–∫–ª–∞–¥–∏ –¥–ª—è –∞–¥–º—ñ–Ω—Å—å–∫–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π (UA/EN)

**‚ö†Ô∏è –ß–∞—Å—Ç–∫–æ–≤–æ –≤–∏–∫–æ–Ω–∞–Ω–æ:**
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ (–±–∞–∑–æ–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è)

**‚úÖ –ü–æ–≤–Ω—ñ—Å—Ç—é –≤–∏–∫–æ–Ω–∞–Ω–æ (–¥–æ–¥–∞—Ç–∫–æ–≤–æ):**
- Scheduler –¥–ª—è —Å–ø–æ–≤—ñ—â–µ–Ω—å –ø—Ä–æ –±–∞–ª–∞–Ω—Å –∑ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—é –æ–±—Ä–æ–±–∫–æ—é (worker pool)
- –ú–µ—Ç–æ–¥–∏ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏ —Ç–∞ –±–∞–ª–∞–Ω—Å–∞–º–∏
- –ü–µ—Ä–µ–∫–ª–∞–¥–∏ –¥–ª—è –±–∞–ª–∞–Ω—Å-–Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π (UA/EN)

**‚ùå –ù–µ –≤–∏–∫–æ–Ω–∞–Ω–æ:**
- –ü–µ—Ä–µ–∫–ª–∞–¥–∏ –¥–ª—è —Ä–æ—Å—ñ–π—Å—å–∫–æ—ó –º–æ–≤–∏ (RU) –¥–ª—è –∞–¥–º—ñ–Ω—Å—å–∫–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π —Ç–∞ –±–∞–ª–∞–Ω—Å-–Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π

